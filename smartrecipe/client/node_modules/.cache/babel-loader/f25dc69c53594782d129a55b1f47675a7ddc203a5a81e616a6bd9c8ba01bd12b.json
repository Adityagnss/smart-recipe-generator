{"ast":null,"code":"var _jsxFileName = \"/Users/gadeynagasrisaiaditya/Desktop/Aditya/Thaniya & vyshanvi minor project  /project /smartrecipe/client/src/context/auth/AuthState.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport AuthContext from './authContext';\nimport setAuthToken from '../../utils/setAuthToken';\nimport api from '../../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthState = props => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Load User\n  const loadUser = async () => {\n    if (localStorage.token) {\n      setAuthToken(localStorage.token);\n    }\n    try {\n      const res = await api.get('/api/auth');\n      setUser(res.data);\n      setIsAuthenticated(true);\n      setLoading(false);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.msg) || 'Server Error');\n    }\n  };\n\n  // Register User\n  const register = async formData => {\n    try {\n      const res = await api.post('/api/users', formData);\n      localStorage.setItem('token', res.data.token);\n      setToken(res.data.token);\n      await loadUser();\n      return {\n        success: true\n      };\n    } catch (err) {\n      var _err$response2, _err$response2$data, _err$response3, _err$response3$data;\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.msg) || 'Server Error');\n      return {\n        success: false,\n        error: ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.msg) || 'Server Error'\n      };\n    }\n  };\n\n  // Login User\n  const login = async formData => {\n    try {\n      const res = await api.post('/api/auth', formData);\n      localStorage.setItem('token', res.data.token);\n      setToken(res.data.token);\n      await loadUser();\n      return {\n        success: true\n      };\n    } catch (err) {\n      var _err$response4, _err$response4$data, _err$response5, _err$response5$data;\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.msg) || 'Server Error');\n      return {\n        success: false,\n        error: ((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.msg) || 'Server Error'\n      };\n    }\n  };\n\n  // Logout\n  const logout = () => {\n    localStorage.removeItem('token');\n    setToken(null);\n    setUser(null);\n    setIsAuthenticated(false);\n    setLoading(false);\n  };\n\n  // Forgot Password\n  const forgotPassword = async email => {\n    try {\n      const res = await api.post('/api/auth/forgot-password', {\n        email\n      });\n      return {\n        success: true,\n        msg: res.data.msg\n      };\n    } catch (err) {\n      var _err$response6, _err$response6$data, _err$response7, _err$response7$data;\n      setError(((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.msg) || 'Server Error');\n      return {\n        success: false,\n        error: ((_err$response7 = err.response) === null || _err$response7 === void 0 ? void 0 : (_err$response7$data = _err$response7.data) === null || _err$response7$data === void 0 ? void 0 : _err$response7$data.msg) || 'Server Error'\n      };\n    }\n  };\n\n  // Clear Errors\n  const clearErrors = () => setError(null);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      token,\n      isAuthenticated,\n      loading,\n      user,\n      error,\n      register,\n      loadUser,\n      login,\n      logout,\n      forgotPassword,\n      clearErrors\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthState, \"DEf7MyGtu56/7+TZOKdwywZgGu4=\");\n_c = AuthState;\nexport default AuthState;\nvar _c;\n$RefreshReg$(_c, \"AuthState\");","map":{"version":3,"names":["React","useState","AuthContext","setAuthToken","api","jsxDEV","_jsxDEV","AuthState","props","_s","user","setUser","token","setToken","localStorage","getItem","isAuthenticated","setIsAuthenticated","loading","setLoading","error","setError","loadUser","res","get","data","err","_err$response","_err$response$data","removeItem","response","msg","register","formData","post","setItem","success","_err$response2","_err$response2$data","_err$response3","_err$response3$data","login","_err$response4","_err$response4$data","_err$response5","_err$response5$data","logout","forgotPassword","email","_err$response6","_err$response6$data","_err$response7","_err$response7$data","clearErrors","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/gadeynagasrisaiaditya/Desktop/Aditya/Thaniya & vyshanvi minor project  /project /smartrecipe/client/src/context/auth/AuthState.js"],"sourcesContent":["import React, { useState } from 'react';\nimport AuthContext from './authContext';\nimport setAuthToken from '../../utils/setAuthToken';\nimport api from '../../utils/api';\n\nconst AuthState = (props) => {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Load User\n  const loadUser = async () => {\n    if (localStorage.token) {\n      setAuthToken(localStorage.token);\n    }\n\n    try {\n      const res = await api.get('/api/auth');\n      setUser(res.data);\n      setIsAuthenticated(true);\n      setLoading(false);\n    } catch (err) {\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(err.response?.data?.msg || 'Server Error');\n    }\n  };\n\n  // Register User\n  const register = async (formData) => {\n    try {\n      const res = await api.post('/api/users', formData);\n      localStorage.setItem('token', res.data.token);\n      setToken(res.data.token);\n      await loadUser();\n      return { success: true };\n    } catch (err) {\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(err.response?.data?.msg || 'Server Error');\n      return { success: false, error: err.response?.data?.msg || 'Server Error' };\n    }\n  };\n\n  // Login User\n  const login = async (formData) => {\n    try {\n      const res = await api.post('/api/auth', formData);\n      localStorage.setItem('token', res.data.token);\n      setToken(res.data.token);\n      await loadUser();\n      return { success: true };\n    } catch (err) {\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(err.response?.data?.msg || 'Server Error');\n      return { success: false, error: err.response?.data?.msg || 'Server Error' };\n    }\n  };\n\n  // Logout\n  const logout = () => {\n    localStorage.removeItem('token');\n    setToken(null);\n    setUser(null);\n    setIsAuthenticated(false);\n    setLoading(false);\n  };\n\n  // Forgot Password\n  const forgotPassword = async (email) => {\n    try {\n      const res = await api.post('/api/auth/forgot-password', { email });\n      return { success: true, msg: res.data.msg };\n    } catch (err) {\n      setError(err.response?.data?.msg || 'Server Error');\n      return { success: false, error: err.response?.data?.msg || 'Server Error' };\n    }\n  };\n\n  // Clear Errors\n  const clearErrors = () => setError(null);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        token,\n        isAuthenticated,\n        loading,\n        user,\n        error,\n        register,\n        loadUser,\n        login,\n        logout,\n        forgotPassword,\n        clearErrors\n      }}\n    >\n      {props.children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthState;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}