{"ast":null,"code":"var _jsxFileName = \"/Users/gadeynagasrisaiaditya/Desktop/Aditya/Thaniya & vyshanvi minor project  /project /smartrecipe/client/src/context/auth/AuthState.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport AuthContext from './authContext';\nimport setAuthToken from '../../utils/setAuthToken';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthState = props => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Load User\n  const loadUser = async () => {\n    if (localStorage.token) {\n      setAuthToken(localStorage.token);\n    }\n    try {\n      const res = await axios.get('/api/auth');\n      setUser(res.data);\n      setIsAuthenticated(true);\n      setLoading(false);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.msg) || 'Server Error');\n    }\n  };\n\n  // Register User\n  const register = async formData => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    try {\n      const res = await axios.post('/api/users', formData, config);\n      localStorage.setItem('token', res.data.token);\n      setToken(res.data.token);\n      await loadUser();\n      return {\n        success: true\n      };\n    } catch (err) {\n      var _err$response2, _err$response2$data, _err$response3, _err$response3$data;\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.msg) || 'Server Error');\n      return {\n        success: false,\n        error: ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.msg) || 'Server Error'\n      };\n    }\n  };\n\n  // Login User\n  const login = async formData => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    try {\n      const res = await axios.post('/api/auth', formData, config);\n      localStorage.setItem('token', res.data.token);\n      setToken(res.data.token);\n      await loadUser();\n      return {\n        success: true\n      };\n    } catch (err) {\n      var _err$response4, _err$response4$data, _err$response5, _err$response5$data;\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.msg) || 'Server Error');\n      return {\n        success: false,\n        error: ((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.msg) || 'Server Error'\n      };\n    }\n  };\n\n  // Logout\n  const logout = () => {\n    localStorage.removeItem('token');\n    setToken(null);\n    setUser(null);\n    setIsAuthenticated(false);\n    setLoading(false);\n  };\n\n  // Forgot Password\n  const forgotPassword = async email => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    try {\n      const res = await axios.post('/api/auth/forgot-password', {\n        email\n      }, config);\n      return {\n        success: true,\n        msg: res.data.msg\n      };\n    } catch (err) {\n      var _err$response6, _err$response6$data, _err$response7, _err$response7$data;\n      setError(((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : (_err$response6$data = _err$response6.data) === null || _err$response6$data === void 0 ? void 0 : _err$response6$data.msg) || 'Server Error');\n      return {\n        success: false,\n        error: ((_err$response7 = err.response) === null || _err$response7 === void 0 ? void 0 : (_err$response7$data = _err$response7.data) === null || _err$response7$data === void 0 ? void 0 : _err$response7$data.msg) || 'Server Error'\n      };\n    }\n  };\n\n  // Clear Errors\n  const clearErrors = () => setError(null);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      token,\n      isAuthenticated,\n      loading,\n      user,\n      error,\n      register,\n      loadUser,\n      login,\n      logout,\n      forgotPassword,\n      clearErrors\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthState, \"DEf7MyGtu56/7+TZOKdwywZgGu4=\");\n_c = AuthState;\nexport default AuthState;\nvar _c;\n$RefreshReg$(_c, \"AuthState\");","map":{"version":3,"names":["React","useState","axios","AuthContext","setAuthToken","jsxDEV","_jsxDEV","AuthState","props","_s","user","setUser","token","setToken","localStorage","getItem","isAuthenticated","setIsAuthenticated","loading","setLoading","error","setError","loadUser","res","get","data","err","_err$response","_err$response$data","removeItem","response","msg","register","formData","config","headers","post","setItem","success","_err$response2","_err$response2$data","_err$response3","_err$response3$data","login","_err$response4","_err$response4$data","_err$response5","_err$response5$data","logout","forgotPassword","email","_err$response6","_err$response6$data","_err$response7","_err$response7$data","clearErrors","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/gadeynagasrisaiaditya/Desktop/Aditya/Thaniya & vyshanvi minor project  /project /smartrecipe/client/src/context/auth/AuthState.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport AuthContext from './authContext';\nimport setAuthToken from '../../utils/setAuthToken';\n\nconst AuthState = (props) => {\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  const [isAuthenticated, setIsAuthenticated] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Load User\n  const loadUser = async () => {\n    if (localStorage.token) {\n      setAuthToken(localStorage.token);\n    }\n\n    try {\n      const res = await axios.get('/api/auth');\n      setUser(res.data);\n      setIsAuthenticated(true);\n      setLoading(false);\n    } catch (err) {\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(err.response?.data?.msg || 'Server Error');\n    }\n  };\n\n  // Register User\n  const register = async (formData) => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n\n    try {\n      const res = await axios.post('/api/users', formData, config);\n      localStorage.setItem('token', res.data.token);\n      setToken(res.data.token);\n      await loadUser();\n      return { success: true };\n    } catch (err) {\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(err.response?.data?.msg || 'Server Error');\n      return { success: false, error: err.response?.data?.msg || 'Server Error' };\n    }\n  };\n\n  // Login User\n  const login = async (formData) => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n\n    try {\n      const res = await axios.post('/api/auth', formData, config);\n      localStorage.setItem('token', res.data.token);\n      setToken(res.data.token);\n      await loadUser();\n      return { success: true };\n    } catch (err) {\n      localStorage.removeItem('token');\n      setToken(null);\n      setUser(null);\n      setIsAuthenticated(false);\n      setLoading(false);\n      setError(err.response?.data?.msg || 'Server Error');\n      return { success: false, error: err.response?.data?.msg || 'Server Error' };\n    }\n  };\n\n  // Logout\n  const logout = () => {\n    localStorage.removeItem('token');\n    setToken(null);\n    setUser(null);\n    setIsAuthenticated(false);\n    setLoading(false);\n  };\n\n  // Forgot Password\n  const forgotPassword = async (email) => {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n\n    try {\n      const res = await axios.post('/api/auth/forgot-password', { email }, config);\n      return { success: true, msg: res.data.msg };\n    } catch (err) {\n      setError(err.response?.data?.msg || 'Server Error');\n      return { success: false, error: err.response?.data?.msg || 'Server Error' };\n    }\n  };\n\n  // Clear Errors\n  const clearErrors = () => setError(null);\n\n  return (\n    <AuthContext.Provider\n      value={{\n        token,\n        isAuthenticated,\n        loading,\n        user,\n        error,\n        register,\n        loadUser,\n        login,\n        logout,\n        forgotPassword,\n        clearErrors\n      }}\n    >\n      {props.children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthState;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}